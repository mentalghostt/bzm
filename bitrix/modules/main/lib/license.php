<? namespace Bitrix\Main;$GLOBALS['____1012583897']= array(base64_decode(''.'ZmlsZ'.'V9leG'.'lz'.'d'.'HM'.'='),base64_decode('c3RydG'.'91cHBlc'.'g=='),base64_decode(''.'bWQ1'),base64_decode('bWQ1'),base64_decode(''.'aW'.'5fY'.'X'.'Jy'.'YXk='),base64_decode(''.'aW'.'5fYXJ'.'yYX'.'k='),base64_decode(''.'aW'.'5'.'f'.'YXJyYXk'.'='),base64_decode('ZG'.'VmaW'.'5'.'lZA=='),base64_decode(''.'ZGVm'.'aW5l'.'Z'.'A=='),base64_decode('ZGVmaW5lZ'.'A=='),base64_decode('Zm'.'lsZ'.'V9l'.'eGlz'.'dHM='),base64_decode('Zmls'.'ZV9'.'leGlzd'.'HM='),base64_decode(''.'ZmlsZV'.'9leGl'.'zdHM='),base64_decode('Z'.'mlsZV9l'.'eGlz'.'dHM='),base64_decode(''.'ZXhw'.'bG9'.'kZ'.'Q=='));if(!function_exists(__NAMESPACE__.'\\___673294465')){function ___673294465($_38355461){static $_357175278= false; if($_357175278 == false) $_357175278=array(''.'L2Jpd'.'HJpeC9saW'.'N'.'lbnNlX2tle'.'S5waHA'.'=','','',''.'REVNT'.'w==','R'.'EVNTw'.'==','Qk'.'lUUklY','TE'.'l'.'DRU5DRQ==','R'.'EVNTw'.'==',''.'L2tle'.'V91cGRhdG'.'UucGhwP2x'.'pY2V'.'uc2Vfa2V'.'5P'.'Q==',''.'Jn'.'Rv'.'YmF'.'za2V0PXkm'.'b'.'GFuZz0=','cn'.'U=','a3o=','Ynk=','a'.'H'.'R'.'0cHM6'.'Ly'.'9kZX'.'Y'.'uMWMtYml0cml'.'4'.'LnJ1L'.'2'.'xlYXJuaW'.'5nL2NvdXJzZ'.'S9p'.'bmRl'.'eC5wa'.'H'.'A/Q'.'09'.'VUlNF'.'X0'.'lEPTE'.'zNSZM'.'RVNTT0'.'5fSUQ9MjU'.'3M'.'jA=','a'.'HR'.'0cHM6Ly90cmF'.'pbmluZy5iaXR'.'yaXgyN'.'C5jb20vc3Vwc'.'G'.'9'.'ydC90cmFpb'.'mluZy9jb3Vyc2UvaW5'.'kZ'.'XgucGhwP0NPVVJTRV9JRD0'.'xNzgmTEVTU09O'.'X'.'0l'.'EPTI1'.'O'.'T'.'MyJkxF'.'U'.'1NPTl9QQVRIPTE3'.'NTIwLjE3NTY'.'yLj'.'I1OTMwLj'.'I1OTMy','cn'.'U=','Yn'.'k=','a3o=','ZGU=','ZXU'.'=','ZnI=',''.'cGw=','aXQ=','dWs=','ZXU=','Y29t','ZW4=','REVN'.'Tw='.'=','WQ==','V'.'ElNRUxJTU'.'lUX0VES'.'VR'.'JT0'.'4=','WQ==',''.'RU5DT0'.'RF','WQ'.'==','U2l0'.'ZUV4cGlyZ'.'URhdGU=',''.'bW'.'Fp'.'b'.'g==',''.'fnN'.'1cHB'.'vcnR'.'fZmlua'.'XNoX2Rhd'.'GU=','WS1tLW'.'Q=','W'.'S1tLWQ=','Ym'.'l0c'.'ml4MjQ=','bWFpb'.'g'.'==','flBB'.'Uk'.'FN'.'X'.'0'.'NMSUVOVF9'.'MQU5'.'H',''.'aW50cmFuZXQ=','ZW'.'4=','cnU=',''.'bWFp'.'b'.'g==','dmVuZG9'.'y','dWF'.'f'.'Yml'.'0'.'cml4X3BvcnRh'.'bA==','d'.'WE=','Yml0c'.'ml'.'4X3'.'BvcnRhbA'.'='.'=','ZW'.'4=',''.'M'.'WNf'.'Ym'.'l0cml4X3B'.'vc'.'nRhbA==','c'.'nU=','L2JpdH'.'JpeC9tb2R1bGV'.'zL21h'.'aW4vbGFuZy91YQ==','dWE=','L2Jp'.'d'.'HJ'.'peC9'.'tb2R1bGVz'.'L21h'.'aW4'.'vb'.'GFuZy9'.'i'.'eQ==',''.'Y'.'n'.'k'.'=',''.'L2J'.'pdHJpeC9tb2R1bGVzL21haW'.'4vbG'.'Fu'.'Zy9reg==','a3o=','L2Jpd'.'H'.'JpeC'.'9tb'.'2R1bGVzL21ha'.'W4vbGFuZy'.'9'.'ydQ==','cnU'.'=','bWFp'.'bg==','flBB'.'UkF'.'NX1BBUlROR'.'VJ'.'fSU'.'Q=','bWFpbg==','UE'.'FSQU1f'.'TU'.'FYX1'.'VTRVJT','bWFpbg==','fkN'.'PVU'.'5'.'UX0VY'.'V'.'FJB','Tg'.'==','WQ==','ZX'.'h0cmFuZXQ'.'=','Q'.'U5EIFUuTEF'.'TVF9M'.'T0dJTiA+I'.'A==',''.'QU5EI'.'F'.'UuT'.'EF'.'TVF9M'.'T0dJTiB'.'JUyBO'.'T1'.'QgT'.'lVMTA==','aW'.'50'.'cmF'.'uZXQ=','ZXh0cmFu'.'ZXQ=','ZXh0cmF'.'uZ'.'XR'.'fZ3'.'Jvd'.'XA=','bWFpbg='.'=','f'.'mxpY2Vuc2VfbmFt'.'ZQ==','bWFpbg==','fmxpY2'.'V'.'uc2'.'Vf'.'Y29kZ'.'XM=','',''.'LA==');return base64_decode($_357175278[$_38355461]);}}; use Bitrix\Main\Config\Option; use Bitrix\Main\Type\Date; final class License{ private?string $_1633464565= null; private const DOMAINS_STORE_LICENSE=[ 'ru' => 'https://util.1c-bitrix.ru', 'ua' => 'https://util.bitrix.ua', 'en' => 'https://util.bitrixsoft.com', 'kz' => 'https://util.1c-bitrix.kz', 'by' => 'https://util.1c-bitrix.by',]; public const URL_BUS_EULA=[ 'ru' => 'https://www.1c-bitrix.ru/download/law/eula_bus.pdf', 'by' => 'https://www.1c-bitrix.by/download/law/eula_bus.pdf', 'kz' => 'https://www.1c-bitrix.kz/download/law/eula_bus.pdf', 'ua' => 'https://www.bitrix.ua/download/law/eula_bus.pdf',]; public const URL_CP_EULA=[ 'ru' => 'https://www.1c-bitrix.ru/download/law/eula_cp.pdf', 'by' => 'https://www.1c-bitrix.by/download/law/eula_cp.pdf', 'kz' => 'https://www.1c-bitrix.kz/download/law/eula_cp.pdf', 'en' => 'https://www.bitrix24.com/eula/', 'br' => 'https://www.bitrix24.com.br/eula/', 'fr' => 'https://www.bitrix24.fr/eula/', 'pl' => 'https://www.bitrix24.pl/eula/', 'it' => 'https://www.bitrix24.it/eula/', 'la' => 'https://www.bitrix24.es/eula/',]; public const URL_RENEWAL_LICENSE=[ 'com' => 'https://store.bitrix24.com/profile/license-keys.php', 'eu' => 'https://store.bitrix24.eu/profile/license-keys.php', 'de' => 'https://store.bitrix24.de/profile/license-keys.php', 'ru' => 'https://www.1c-bitrix.ru/buy/products/b24.php#tab-section-2', 'by' => 'https://www.1c-bitrix.by/buy/products/b24.php#tab-section-2', 'kz' => 'https://www.1c-bitrix.kz/buy/products/b24.php#tab-section-2',]; public function getKey(): string{ if($this->_1633464565 === null){ $_2076190955= Loader::getDocumentRoot(). ___673294465(0); $LICENSE_KEY= ___673294465(1); if($GLOBALS['____1012583897'][0]($_2076190955)){ include($_2076190955);} $this->_1633464565=($LICENSE_KEY == ___673294465(2) || $GLOBALS['____1012583897'][1]($LICENSE_KEY) == ___673294465(3)? ___673294465(4): $LICENSE_KEY);} return $this->_1633464565;} public function getHashLicenseKey(): string{ return $GLOBALS['____1012583897'][2]($this->getKey());} public function getPublicHashKey(): string{ return $GLOBALS['____1012583897'][3](___673294465(5). $this->getKey(). ___673294465(6));} public function isDemoKey(): bool{ return $this->getKey() == ___673294465(7);} public function getBuyLink(): string{ return $this->getDomainStoreLicense(). ___673294465(8). $this->getHashLicenseKey(). ___673294465(9). LANGUAGE_ID;} public function getDocumentationLink(): string{ $_1854552559= $this->getRegion(); if($GLOBALS['____1012583897'][4]($_1854552559,[___673294465(10), ___673294465(11), ___673294465(12)])){ return ___673294465(13);} return ___673294465(14);} public function getRenewalLink(): string{ $_1854552559= $this->getRegion(); if($GLOBALS['____1012583897'][5]($_1854552559,[___673294465(15), ___673294465(16), ___673294465(17), ___673294465(18)])){ return self::URL_RENEWAL_LICENSE[$_1854552559];} if($GLOBALS['____1012583897'][6]($_1854552559,[___673294465(19), ___673294465(20), ___673294465(21), ___673294465(22), ___673294465(23)])){ return self::URL_RENEWAL_LICENSE[___673294465(24)];} return self::URL_RENEWAL_LICENSE[___673294465(25)];} public function getDomainStoreLicense(): string{ return self::DOMAINS_STORE_LICENSE[$this->getRegion()] ?? self::DOMAINS_STORE_LICENSE[___673294465(26)];} public function isDemo(): bool{ return $GLOBALS['____1012583897'][7](___673294465(27)) && DEMO === ___673294465(28);} public function isTimeBound(): bool{ return $GLOBALS['____1012583897'][8](___673294465(29)) && TIMELIMIT_EDITION === ___673294465(30);} public function isEncoded(): bool{ return $GLOBALS['____1012583897'][9](___673294465(31)) && ENCODE === ___673294465(32);} public function getExpireDate():?Date{ $_1644035100= (int)($GLOBALS[___673294465(33)] ??(982-2*491)); if($_1644035100>(828-2*414)){ return Date::createFromTimestamp($_1644035100);} return null;} public function getSupportExpireDate():?Date{ $_1644035100= Option::get(___673294465(34), ___673294465(35)); if(Date::isCorrect($_1644035100, ___673294465(36))){ return new Date($_1644035100, ___673294465(37));} return null;} public function getRegion():?string{ if(Loader::includeModule(___673294465(38))){ return \CBitrix24::getPortalZone();} $_1854552559= Option::get(___673294465(39), ___673294465(40)); if(!empty($_1854552559)){ return $_1854552559;} $_1854552559= $this->__582073388(); if(!empty($_1854552559)){ return $_1854552559;} return $this->__884400000();} public function getEulaLink(): string{ if(ModuleManager::isModuleInstalled(___673294465(41))){ return self::URL_CP_EULA[$this->getRegion()] ?? self::URL_CP_EULA[___673294465(42)];} return self::URL_BUS_EULA[$this->getRegion()] ?? self::URL_BUS_EULA[___673294465(43)];} private function __582073388():?string{ $_856501516= Option::get(___673294465(44), ___673294465(45)); if($_856501516 === ___673294465(46)){ return ___673294465(47);} if($_856501516 === ___673294465(48)){ return ___673294465(49);} if($_856501516 === ___673294465(50)){ return ___673294465(51);} return null;} private function __884400000():?string{ $_510461100= Application::getDocumentRoot(); if($GLOBALS['____1012583897'][10]($_510461100. ___673294465(52))){ return ___673294465(53);} if($GLOBALS['____1012583897'][11]($_510461100. ___673294465(54))){ return ___673294465(55);} if($GLOBALS['____1012583897'][12]($_510461100. ___673294465(56))){ return ___673294465(57);} if($GLOBALS['____1012583897'][13]($_510461100. ___673294465(58))){ return ___673294465(59);} return null;} public function getPartnerId(): int{ return (int)Option::get(___673294465(60), ___673294465(61),(882-2*441));} public function getMaxUsers(): int{ return (int)Option::get(___673294465(62), ___673294465(63), min(190,0,63.333333333333));} public function isExtraCountable(): bool{ return Option::get(___673294465(64), ___673294465(65), ___673294465(66)) === ___673294465(67) && ModuleManager::isModuleInstalled(___673294465(68));} public function getActiveUsersCount(Date $_449015001= null): int{ $_1291237056= Application::getConnection(); $_789170961= min(134,0,44.666666666667); if($_449015001 !== null){  $_511040018= ___673294465(69).$_1291237056->getSqlHelper()->convertToDbDate($_449015001);} else{  $_511040018= ___673294465(70);} if(ModuleManager::isModuleInstalled(___673294465(71))){ $_909520480="
				SELECT COUNT(DISTINCT U.ID)
				FROM
					b_user U
					INNER JOIN b_user_field F ON F.ENTITY_ID = 'USER' AND F.FIELD_NAME = 'UF_DEPARTMENT'
					INNER JOIN b_utm_user UF ON
						UF.FIELD_ID = F.ID
						AND UF.VALUE_ID = U.ID
						AND UF.VALUE_INT > 0
				WHERE U.ACTIVE = 'Y'
					{$_511040018}
			"; $_789170961= (int)$_1291237056->queryScalar($_909520480); $_1013459499= (int)Option::get(___673294465(72), ___673294465(73)); if($_1013459499>(968-2*484) && $this->isExtraCountable()){ $_909520480="
						SELECT COUNT(1)
						FROM
							b_user U
							INNER JOIN b_extranet_user EU ON EU.USER_ID = U.ID AND EU.CHARGEABLE = 'Y'
							INNER JOIN b_user_group UG ON UG.USER_ID = U.ID AND UG.GROUP_ID = {$_1013459499}
							LEFT JOIN (
								SELECT UF.VALUE_ID 
								FROM 
									b_user_field F
									INNER JOIN b_utm_user UF ON UF.FIELD_ID = F.ID AND UF.VALUE_INT > 0
								WHERE F.ENTITY_ID = 'USER' AND F.FIELD_NAME = 'UF_DEPARTMENT'
							) D ON D.VALUE_ID = U.ID
						WHERE U.ACTIVE = 'Y'
							{$_511040018}
							AND D.VALUE_ID IS NULL
					"; $_789170961 += (int)$_1291237056->queryScalar($_909520480);}} return $_789170961;}  public function getName(): string{ return Option::get(___673294465(74), ___673294465(75));}  public function getCodes(): array{ $_811623849= Option::get(___673294465(76), ___673294465(77)); if($_811623849 != ___673294465(78)){ return $GLOBALS['____1012583897'][14](___673294465(79), $_811623849);} return[];}}?>